{"version":3,"sources":["components/StyledButton.js","components/Header.js","images/eImg.svg","components/ErrorComponent.js","components/Images.js","components/ImageModal.js","components/Loading.js","App.js","index.js"],"names":["Button","styled","button","Header","setInputQuery","setPage","inputQuery","array","JSON","parse","localStorage","getItem","useState","storedInputs","setStoredInputs","filteredArray","setFilteredArray","searchSuggestions","setSearchSuggestions","className","type","onKeyUp","e","input","target","value","filter","inp","toLowerCase","includes","key","push","setItem","stringify","length","map","i","onClick","style","color","removeItem","ErrorComponent","message","src","errorImg","Images","imagesArray","setOpenModal","setModalSrc","loading","page","totalPages","pageNo","useRef","lastImageOnPage","useCallback","image","current","disconnect","IntersectionObserver","entries","isIntersecting","prevPage","observe","setModal","link","alt","cursor","ref","ImageModal","class","Loading","height","width","timeout","App","setImagesArray","modalSrc","openModal","error","setError","setLoading","setTotalPages","fetchDataFromUrl","url","a","picArray","fetch","then","res","json","data","photos","photo","farm","server","id","secret","prevState","pages","console","log","catch","defaultUrl","useEffect","Fragment","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5e47d6ab.chunk.js","sourcesContent":["import styled from 'styled-components';\r\nimport React from 'react';\r\nconst Button = styled.button` display: inline;\r\nfont-size:medium;\r\nbackground: #ff5d33f1;\r\ntransition: all 0.2s ease-in-out;\r\ncolor: white;\r\nborder: 0;\r\nheight:30px;\r\nborder-radius: 5px;\r\nmargin-left: 5px;\r\nmargin-right:4px;\r\nmargin-bottom:5px;\r\n &:hover {\r\n    box-shadow: -4px -4px 7px white, 4px 4px 7px gray;\r\n    background:#ec451bf1;\r\n  }\r\n  \r\n  &:active {\r\n    box-shadow: inset 1px 1px 2px white, inset -1px -1px 2px gray;\r\n  }`\r\n\r\n  export default Button;\r\n","import React ,{useState} from 'react';\r\nimport Button from './StyledButton';\r\n\r\nexport const Header = ({setInputQuery,inputQuery,setPage}) => { \r\n    var array = JSON.parse(localStorage.getItem('storedInput'))||[];\r\n    const [storedInputs,setStoredInputs] = useState(array); //getting previous suggestions if stored in localStorage\r\n    const[filteredArray,setFilteredArray]= useState([]);\r\n    const[searchSuggestions,setSearchSuggestions] = useState(true)\r\n//to clear previous searches\r\n    const clearSearchItems = () => {\r\n        if(localStorage.getItem('storedInput')){\r\n            localStorage.removeItem('storedInput')\r\n            setStoredInputs([]);\r\n            setSearchSuggestions(false);\r\n        }\r\n    }\r\n    const setSuggestions = (val) => {\r\n        setInputQuery(val);\r\n        setSearchSuggestions(false);\r\n    }\r\n    const onInput = (e) => {\r\n        //for search suggestions\r\n        let input  = e.target.value;\r\n        let array = storedInputs.filter((inp) => (inp.toLowerCase().includes(input.toLowerCase())))\r\n        setFilteredArray(array);\r\n        setSearchSuggestions(true);\r\n        //for getting input only on enter key\r\n        if(e.key === 'Enter'&& input!==\"\"){\r\n            setInputQuery(input);\r\n            if(!storedInputs.includes(input)) {\r\n                storedInputs.push(input);\r\n                localStorage.setItem('storedInput',JSON.stringify(storedInputs))\r\n            }\r\n            setPage(1);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"header\">\r\n            <div>\r\n                <h1 className=\"title\">Search Images</h1>\r\n            </div>\r\n            <div>\r\n                <h6 className=\"title\">\r\n                    Input and press enter to search awesome images!\r\n                </h6>\r\n            </div>\r\n            <div className=\"searchContainer\">\r\n                <input type=\"search\" className=\"search\" onKeyUp={onInput} />\r\n                <div className= {searchSuggestions ? \"searchString\" : \"displayNone\"}>\r\n                    {\r\n                        (filteredArray.length>0) ? <>{filteredArray.map((value,i) => (\r\n                            <li key={i} onClick={()=> setSuggestions(value)} className=\"searchSuggestions\" style={{color:'black'}}>{value}</li>\r\n                        ))}< Button onClick={clearSearchItems}>Clear</Button>\r\n                        </>\r\n                        :null\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/eImg.13468768.svg\";","import React from 'react'\r\nimport errorImg from '../images/eImg.svg'\r\n\r\nexport const ErrorComponent = ({message}) => {\r\n    return (\r\n        <div className=\"errorImg\">\r\n            {\r\n                (message=\"You've reached the end!\") ? \"\" : <img src={errorImg}/>\r\n            }\r\n            \r\n            <h5>{message}</h5>\r\n        </div>\r\n    )\r\n}\r\n","import React,{useCallback,useRef} from 'react'\r\nimport { ErrorComponent } from './ErrorComponent';\r\n\r\nexport const Images = ({imagesArray,inputQuery,setOpenModal,setModalSrc,loading,page,setPage,totalPages}) => {\r\n    const pageNo = useRef();\r\n    const lastImageOnPage = useCallback((image) => {\r\n        if(loading) return //return because we dont want ot check window if images are still loading\r\n        if(pageNo.current){ //doing this to disconnect from current page and add to next page\r\n            pageNo.current.disconnect()\r\n        }\r\n        //setting new reference to end of new page\r\n        pageNo.current = new IntersectionObserver(entries => { //function watches all the entries that it is watching currently\r\n            if(entries[0].isIntersecting && page<totalPages){ //This checks if the image is currently there on the page\r\n                setPage(prevPage => prevPage+1)\r\n            }\r\n        }) \r\n        if(image){\r\n            pageNo.current.observe(image); // to keep a track of the last image\r\n        }\r\n    },[loading,page]);\r\n\r\n    const setModal= (link) => {\r\n        setOpenModal(true);\r\n        setModalSrc(link);\r\n    }\r\n    return (\r\n        <div className=\"imageContainer\">\r\n           {\r\n               ((imagesArray===[])) ? <h3>No results found</h3> \r\n             : imagesArray.map((link,i) => { \r\n                 if(imagesArray.length === i+1){\r\n                    <div>{loading && 'Loading...'}</div>\r\n                 return<img src={link} \r\n                    alt=\"image-error\" \r\n                    onClick={() => setModal(link)} \r\n                    style={{cursor:\"pointer\"}}\r\n                    ref = {lastImageOnPage}\r\n                    />\r\n                 }\r\n                    return<img src={link} \r\n                    alt=\"image-error\" \r\n                    onClick={() => setModal(link)} \r\n                    style={{cursor:\"pointer\"}}/>\r\n                })\r\n             }\r\n             <div className=\"moreImages\">\r\n                {(inputQuery!==\"\" && page>totalPages && imagesArray.length>1) ?  <ErrorComponent message=\"You've reached the end!\"/> : <h3>Loading</h3>}\r\n             </div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nexport const ImageModal = ({link,setOpenModal}) => {\r\n    return (\r\n        <div className=\"modalBack\">\r\n        <div className=\"modalContainer\">\r\n            <div className=\"modalClose\" onClick={() => {setOpenModal(false)}}><i class=\"fas fa-times-circle\"></i></div>\r\n            <div className=\"modalContent\">\r\n                <img className=\"image\" alt=\"image-error\"src={link}/>\r\n            </div>\r\n        </div>\r\n    </div>\r\n   \r\n    )\r\n}\r\n","import React from 'react'\r\nimport Loader from \"react-loader-spinner\";\r\nexport const Loading = () => {\r\n    return (\r\n        <div className=\"loading\">\r\n            <div><Loader\r\n                    type=\"Puff\"\r\n                    color=\"#ff5d33f1\"\r\n                    height={200}\r\n                    width={200}\r\n                    timeout={5000} //3 secs\r\n                />\r\n            </div>\r\n            <div>\r\n                <h3>Loading..</h3>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import './App.css';\nimport React, {useState,useEffect} from 'react';\nimport { Header } from './components/Header';\nimport { Images } from './components/Images';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { ImageModal } from './components/ImageModal';\nimport { ErrorComponent } from './components/ErrorComponent';\nimport { Loading } from './components/Loading';\n\nfunction App() {\n  const [imagesArray, setImagesArray] = useState([]);\n  const [modalSrc,setModalSrc] = useState('');    //to get modal source from images component\n  const [openModal,setOpenModal] = useState(false);  //to open/close modal\n  const [inputQuery,setInputQuery] = useState(\"\");  //getting input from Header\n  const[page,setPage] = useState(1);                //for changing page number while infinite loading\n  const[error,setError] = useState(false);\n  const[loading,setLoading] = useState(false);\n  const [totalPages,setTotalPages] = useState(1); //total pages of data returned by API\n\n//function for fetching data from flickr API\n  async function fetchDataFromUrl(url){\n     var picArray=[];\n     setLoading(true);\n     await fetch(url)\n    .then((res) => {return res.json()})\n    .then((data) => {\n        picArray = data.photos.photo.map((image) => {\n           return `https://farm${image.farm}.staticflickr.com/${image.server}/${image.id}_${image.secret}.jpg`\n        })\n        setImagesArray(prevState => {\n          return([...prevState,...picArray])\n        } );\n        setTotalPages(data.photos.pages);\n        console.log(totalPages);\n        setLoading(false);\n    })\n    .catch(error => {\n      setError(true);\n      setLoading(false);\n    })\n  }\n\n//*Please note* - I have changed the default url given by company to a url returning default images of pets because the provided default url \n  //use to return a few adult images. I went through the documentation for the getRecent method - https://www.flickr.com/services/api/flickr.photos.getRecent.html\n  //but it didn't have a safe search option for getRecent method unlike other methods.I have also commented the same API below which can be used for the getRecent method.\n  // const defaultUrl = `https://www.flickr.com/services/rest/?method=flickr.photos.getRecent&api_key=c603ee6ad346f3682d963bc43161ad94&page=${page}&format=json&nojsoncallback=1`\n  const defaultUrl = ` https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=c603ee6ad346f3682d963bc43161ad94&page=${page}&tags=pets&safe_search=1&per_page=100&format=json&nojsoncallback=1`\n\n  useEffect(() => {\n    if(inputQuery===\"\") //for getting default photos from default url\n      fetchDataFromUrl(defaultUrl);\n    else{ // for searching photos for given input query\n      let url = `https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=c603ee6ad346f3682d963bc43161ad94&page=${page}&tags=${inputQuery}&safe_search=1&per_page=100&format=json&nojsoncallback=1`\n      fetchDataFromUrl(url);\n    }\n  },[inputQuery,page])\n\n  //for resetting images array everytime input query changes\n  useEffect(() => {\n    setImagesArray([]);\n  }, [inputQuery])\n\n  return (\n    <React.Fragment>\n      <div>\n        <div>\n          <Header setInputQuery={setInputQuery} \n              inputQuery={inputQuery}\n              setPage={setPage}/>\n        </div>\n        <div className=\"body\">\n          {loading ?  <Loading/> : \"\"}\n          {!error ? <Images \n                      imagesArray={imagesArray} \n                      setOpenModal={setOpenModal} \n                      setModalSrc={setModalSrc} //for getting image source for modal\n                      loading={loading}\n                      page={page}                //page for infinite loading\n                      setPage={setPage}\n                      inputQuery={inputQuery}\n                      totalPages={totalPages}\n                    /> \n                  : <ErrorComponent message=\"Oops! Some error occured while loading the images!\"/>}\n        \n        {openModal ? <ImageModal \n                        link={modalSrc} \n                        setOpenModal={setOpenModal}\n                      /> \n                    : \"\"}\n        </div>\n      </div>\n    </React.Fragment>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}