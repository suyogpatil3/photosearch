{"version":3,"sources":["components/Header.js","components/Images.js","components/ImageModal.js","images/eImg.svg","components/ErrorComponent.js","components/Loading.js","App.js","index.js"],"names":["Header","setInputQuery","setPage","inputQuery","array","JSON","parse","localStorage","getItem","useState","storedInputs","setStoredInputs","filteredArray","setFilteredArray","searchSuggestions","setSearchSuggestions","className","type","onKeyUp","e","input","target","value","filter","inp","includes","key","push","setItem","stringify","length","map","i","onClick","style","color","removeItem","Images","imagesArray","setOpenModal","setModalSrc","loading","page","pageNo","error","useRef","lastImageOnPage","useCallback","image","current","disconnect","IntersectionObserver","entries","isIntersecting","prevPage","observe","setModal","link","src","alt","cursor","ref","ImageModal","class","ErrorComponent","errorImg","Loading","height","width","timeout","App","setImagesArray","modalSrc","openModal","setError","setLoading","fetchDataFromUrl","url","a","picArray","fetch","then","res","json","data","photos","photo","farm","server","id","secret","prevState","catch","defaultUrl","useEffect","Fragment","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2e225adf.chunk.js","sourcesContent":["import React ,{useState} from 'react';\r\n\r\nexport const Header = ({setInputQuery,inputQuery,setPage}) => { \r\n    var array = JSON.parse(localStorage.getItem('storedInput'))||[];\r\n    const [storedInputs,setStoredInputs] = useState(array); //getting previous suggestions if stored in localStorage\r\n    const[filteredArray,setFilteredArray]= useState([]);\r\n    const[searchSuggestions,setSearchSuggestions] = useState(true)\r\n//to clear previous searches\r\n    const clearSearchItems = () => {\r\n        if(localStorage.getItem('storedInput')){\r\n            localStorage.removeItem('storedInput')\r\n            setStoredInputs([]);\r\n            setSearchSuggestions(false);\r\n        }\r\n    }\r\n    const onInput = (e) => {\r\n        //for search suggestions\r\n        let input  = e.target.value;\r\n        let array = storedInputs.filter((inp) => inp.includes(input))\r\n        setFilteredArray(array);\r\n        //for getting input only on enter key\r\n        if(e.key === 'Enter'&& input!==\"\"){\r\n            setInputQuery(input);\r\n            if(!storedInputs.includes(input)) {\r\n                storedInputs.push(input);\r\n                localStorage.setItem('storedInput',JSON.stringify(storedInputs))\r\n            }\r\n            setPage(1);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"header\">\r\n            <div>\r\n                <h1 className=\"title\">Search Images</h1>\r\n            </div>\r\n            <div>\r\n                <h5 className=\"title\">\r\n                    Input and press enter to search awesome images!\r\n                </h5>\r\n            </div>\r\n            <div className=\"searchContainer\">\r\n                <input type=\"search\" className=\"search\" onKeyUp={onInput} />\r\n            <div className= {searchSuggestions ? \"searchString\" : \"displayNone\"}>\r\n                {\r\n                    (filteredArray.length>0) ? <>{filteredArray.map((value,i) => (\r\n                        <li key={i} onClick={()=>setInputQuery(value)} className=\"searchSuggestions\" style={{color:'black'}}>{value}</li>\r\n                    ))}<button onClick={clearSearchItems} className=\"clearSearchButton\">Clear</button>\r\n                    </>\r\n                    :null\r\n                }\r\n            </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React,{useCallback,useRef} from 'react'\r\n\r\nexport const Images = ({imagesArray,inputQuery,setOpenModal,setModalSrc,loading,page,setPage,error}) => {\r\n    const pageNo = useRef();\r\n    const lastImageOnPage = useCallback((image) => {\r\n        if(loading) return //return because we dont want ot check window if images are still loading\r\n        if(pageNo.current){ //doing this to disconnect from current page and add to next page\r\n            pageNo.current.disconnect()\r\n        }\r\n        //setting new reference to end of new page\r\n        pageNo.current = new IntersectionObserver(entries => { //function watches all the entries that it is watching currently\r\n            if(entries[0].isIntersecting && page<10){ //This checks if the image is currently there on the page\r\n                setPage(prevPage => prevPage+1)\r\n            }\r\n        }) \r\n        if(image){\r\n            pageNo.current.observe(image); // to keep a track of the last image\r\n        }\r\n    },[loading,page]);\r\n\r\n    const setModal= (link) => {\r\n        setOpenModal(true);\r\n        setModalSrc(link);\r\n    }\r\n    return (\r\n        <div className=\"imageContainer\">\r\n           {\r\n               ((imagesArray===[])) ? <h3>No results found</h3> \r\n             : imagesArray.map((link,i) => { \r\n                 if(imagesArray.length === i+1){\r\n                    <div>{loading && 'Loading...'}</div>\r\n                 return<img src={link} \r\n                    alt=\"image-error\" \r\n                    onClick={() => setModal(link)} \r\n                    style={{cursor:\"pointer\"}}\r\n                    ref = {lastImageOnPage}\r\n                    />\r\n                 }\r\n                    return<img src={link} \r\n                    alt=\"image-error\" \r\n                    onClick={() => setModal(link)} \r\n                    style={{cursor:\"pointer\"}}/>\r\n                })\r\n             }\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nexport const ImageModal = ({link,setOpenModal}) => {\r\n    return (\r\n        <div className=\"modalBack\">\r\n        <div className=\"modalContainer\">\r\n            <div className=\"modalClose\" onClick={() => {setOpenModal(false)}}><i class=\"fas fa-times-circle\"></i></div>\r\n            <div className=\"modalContent\">\r\n                <img className=\"image\" alt=\"image-error\"src={link}/>\r\n            </div>\r\n        </div>\r\n    </div>\r\n   \r\n    )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/eImg.13468768.svg\";","import React from 'react'\r\nimport errorImg from '../images/eImg.svg'\r\n\r\nexport const ErrorComponent = () => {\r\n    return (\r\n        <div className=\"errorImg\">\r\n            <img src={errorImg}/>\r\n            <h4>Sorry!! Some error occured</h4>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport Loader from \"react-loader-spinner\";\r\nexport const Loading = () => {\r\n    return (\r\n        <div className=\"loading\">\r\n            <div><Loader\r\n                    type=\"Puff\"\r\n                    color=\"#ff5d33f1\"\r\n                    height={200}\r\n                    width={200}\r\n                    timeout={5000} //3 secs\r\n                />\r\n            </div>\r\n            <div>\r\n                <h3>Loading..</h3>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import './App.css';\nimport React, {useState,useEffect} from 'react';\nimport { Header } from './components/Header';\nimport { Images } from './components/Images';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { ImageModal } from './components/ImageModal';\nimport { ErrorComponent } from './components/ErrorComponent';\nimport { Loading } from './components/Loading';\n\nfunction App() {\n  const [imagesArray, setImagesArray] = useState([]);\n  const [modalSrc,setModalSrc] = useState('');    //to get modal source from images component\n  const [openModal,setOpenModal] = useState(false);  //to open/close modal\n  const [inputQuery,setInputQuery] = useState(\"\");  //getting input from Header\n  const[page,setPage] = useState(1);                //for changing page number while infinite loading\n  const[error,setError] = useState(false);\n  const[loading,setLoading] = useState(false);\n\n//function for fetching data from flickr API\n  async function fetchDataFromUrl(url){\n     var picArray=[];\n     setLoading(true);\n     await fetch(url)\n    .then((res) => {return res.json()})\n    .then((data) => {\n        picArray = data.photos.photo.map((image) => {\n           return `https://farm${image.farm}.staticflickr.com/${image.server}/${image.id}_${image.secret}.jpg`\n        })\n        setImagesArray(prevState => {\n          return([...prevState,...picArray])\n        } );\n        setLoading(false);\n    })\n    .catch(error => {\n      setError(true);\n    })\n  }\n\n//for getting default photos\n  const defaultUrl = `https://www.flickr.com/services/rest/?method=flickr.photos.getRecent&api_key=c603ee6ad346f3682d963bc43161ad94&page=${page}&format=json&nojsoncallback=1`\n  useEffect(() => {\n    fetchDataFromUrl(defaultUrl);\n  },[page])\n\n// for searching photos for given input query\n  useEffect(() => {\n    if(inputQuery!==\"\"){\n    let url = `https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=c603ee6ad346f3682d963bc43161ad94&page=${page}&tags=${inputQuery}&format=json&nojsoncallback=1`\n    fetchDataFromUrl(url);\n    }\n  }, [inputQuery,page])\n\n  //for resetting images array everytime input query changes\n  useEffect(() => {\n    setImagesArray([]);\n  }, [inputQuery])\n\n  return (\n    <React.Fragment>\n      <div>\n        <div>\n          <Header setInputQuery={setInputQuery} \n              inputQuery={inputQuery}\n              setPage={setPage}/>\n        </div>\n        <div className=\"body\">\n          {loading ?  <Loading/> : \"\"}\n          {!error ? <Images \n                      imagesArray={imagesArray} \n                      setOpenModal={setOpenModal} \n                      setModalSrc={setModalSrc} //for getting image source for modal\n                      loading={loading}\n                      page={page}                //page for infinite loading\n                      setPage={setPage}\n                    inputQuery={inputQuery}/> \n                  : <ErrorComponent/>}\n        \n        {openModal ? <ImageModal \n                        link={modalSrc} \n                        setOpenModal={setOpenModal}\n                      /> \n                    : \"\"}\n        </div>\n      </div>\n    </React.Fragment>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}