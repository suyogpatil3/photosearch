{"version":3,"sources":["components/Header.js","components/Loading.js","components/Images.js","components/ImageModal.js","images/eImg.svg","components/ErrorComponent.js","App.js","index.js"],"names":["Header","setInputQuery","setPage","inputQuery","array","JSON","parse","localStorage","getItem","useState","storedInputs","setStoredInputs","filteredArray","setFilteredArray","searchSuggestions","setSearchSuggestions","className","type","onKeyUp","e","input","target","value","filter","inp","includes","key","push","setItem","stringify","length","map","i","onClick","style","color","removeItem","Loading","height","width","timeout","Images","imagesArray","setOpenModal","setModalSrc","loading","page","pageNo","useRef","lastImageOnPage","useCallback","image","current","disconnect","IntersectionObserver","entries","isIntersecting","prevPage","observe","setModal","link","src","alt","cursor","ref","ImageModal","class","ErrorComponent","errorImg","App","setImagesArray","modalSrc","openModal","error","setError","setLoading","fetchDataFromUrl","url","a","picArray","fetch","then","res","json","data","photos","photo","farm","server","id","secret","prevState","catch","defaultUrl","useEffect","Fragment","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.dc19ccb9.chunk.js","sourcesContent":["import React ,{useState} from 'react';\r\n\r\nexport const Header = ({setInputQuery,inputQuery,setPage}) => { \r\n    var array = JSON.parse(localStorage.getItem('storedInput'))||[];\r\n    const [storedInputs,setStoredInputs] = useState(array); //getting previous suggestions if stored in localStorage\r\n    const[filteredArray,setFilteredArray]= useState([]);\r\n    const[searchSuggestions,setSearchSuggestions] = useState(true)\r\n//to clear previous searches\r\n    const clearSearchItems = () => {\r\n        if(localStorage.getItem('storedInput')){\r\n            localStorage.removeItem('storedInput')\r\n            setStoredInputs([]);\r\n            setSearchSuggestions(false);\r\n        }\r\n    }\r\n    const setSuggestions = (val) => {\r\n        setInputQuery(val);\r\n        setSearchSuggestions(false);\r\n    }\r\n    const onInput = (e) => {\r\n        //for search suggestions\r\n        let input  = e.target.value;\r\n        let array = storedInputs.filter((inp) => inp.includes(input))\r\n        setFilteredArray(array);\r\n        setSearchSuggestions(true);\r\n        //for getting input only on enter key\r\n        if(e.key === 'Enter'&& input!==\"\"){\r\n            setInputQuery(input);\r\n            if(!storedInputs.includes(input)) {\r\n                storedInputs.push(input);\r\n                localStorage.setItem('storedInput',JSON.stringify(storedInputs))\r\n            }\r\n            setPage(1);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"header\">\r\n            <div>\r\n                <h1 className=\"title\">Search Images</h1>\r\n            </div>\r\n            <div>\r\n                <h5 className=\"title\">\r\n                    Input and press enter to search awesome images!\r\n                </h5>\r\n            </div>\r\n            <div className=\"searchContainer\">\r\n                <input type=\"search\" className=\"search\" onKeyUp={onInput} />\r\n            <div className= {searchSuggestions ? \"searchString\" : \"displayNone\"}>\r\n                {\r\n                    (filteredArray.length>0) ? <>{filteredArray.map((value,i) => (\r\n                        <li key={i} onClick={()=> setSuggestions(value)} className=\"searchSuggestions\" style={{color:'black'}}>{value}</li>\r\n                    ))}<button onClick={clearSearchItems} className=\"clearSearchButton\">Clear</button>\r\n                    </>\r\n                    :null\r\n                }\r\n            </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport Loader from \"react-loader-spinner\";\r\nexport const Loading = () => {\r\n    return (\r\n        <div className=\"loading\">\r\n            <div><Loader\r\n                    type=\"Puff\"\r\n                    color=\"#ff5d33f1\"\r\n                    height={200}\r\n                    width={200}\r\n                    timeout={5000} //3 secs\r\n                />\r\n            </div>\r\n            <div>\r\n                <h3>Loading..</h3>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React,{useCallback,useRef} from 'react'\r\nimport { Loading } from './Loading';\r\n\r\nexport const Images = ({imagesArray,inputQuery,setOpenModal,setModalSrc,loading,page,setPage}) => {\r\n    const pageNo = useRef();\r\n    const lastImageOnPage = useCallback((image) => {\r\n        if(loading) return //return because we dont want ot check window if images are still loading\r\n        if(pageNo.current){ //doing this to disconnect from current page and add to next page\r\n            pageNo.current.disconnect()\r\n        }\r\n        //setting new reference to end of new page\r\n        pageNo.current = new IntersectionObserver(entries => { //function watches all the entries that it is watching currently\r\n            if(entries[0].isIntersecting && page<10){ //This checks if the image is currently there on the page\r\n                setPage(prevPage => prevPage+1)\r\n            }\r\n        }) \r\n        if(image){\r\n            pageNo.current.observe(image); // to keep a track of the last image\r\n        }\r\n    },[loading,page]);\r\n\r\n    const setModal= (link) => {\r\n        setOpenModal(true);\r\n        setModalSrc(link);\r\n    }\r\n    return (\r\n        <div className=\"imageContainer\">\r\n           {\r\n               ((imagesArray===[])) ? <h3>No results found</h3> \r\n             : imagesArray.map((link,i) => { \r\n                 if(imagesArray.length === i+1){\r\n                    <div>{loading && 'Loading...'}</div>\r\n                 return<img src={link} \r\n                    alt=\"image-error\" \r\n                    onClick={() => setModal(link)} \r\n                    style={{cursor:\"pointer\"}}\r\n                    ref = {lastImageOnPage}\r\n                    />\r\n                 }\r\n                    return<img src={link} \r\n                    alt=\"image-error\" \r\n                    onClick={() => setModal(link)} \r\n                    style={{cursor:\"pointer\"}}/>\r\n                })\r\n             }\r\n             <div className=\"moreImages\">\r\n                {inputQuery!==\"\" && page<10 ? <h3>Loading</h3> : <h4>..</h4>}\r\n             </div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nexport const ImageModal = ({link,setOpenModal}) => {\r\n    return (\r\n        <div className=\"modalBack\">\r\n        <div className=\"modalContainer\">\r\n            <div className=\"modalClose\" onClick={() => {setOpenModal(false)}}><i class=\"fas fa-times-circle\"></i></div>\r\n            <div className=\"modalContent\">\r\n                <img className=\"image\" alt=\"image-error\"src={link}/>\r\n            </div>\r\n        </div>\r\n    </div>\r\n   \r\n    )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/eImg.13468768.svg\";","import React from 'react'\r\nimport errorImg from '../images/eImg.svg'\r\n\r\nexport const ErrorComponent = () => {\r\n    return (\r\n        <div className=\"errorImg\">\r\n            <img src={errorImg}/>\r\n            <h4>Sorry!! Some error occured</h4>\r\n        </div>\r\n    )\r\n}\r\n","import './App.css';\nimport React, {useState,useEffect} from 'react';\nimport { Header } from './components/Header';\nimport { Images } from './components/Images';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { ImageModal } from './components/ImageModal';\nimport { ErrorComponent } from './components/ErrorComponent';\nimport { Loading } from './components/Loading';\n\nfunction App() {\n  const [imagesArray, setImagesArray] = useState([]);\n  const [modalSrc,setModalSrc] = useState('');    //to get modal source from images component\n  const [openModal,setOpenModal] = useState(false);  //to open/close modal\n  const [inputQuery,setInputQuery] = useState(\"\");  //getting input from Header\n  const[page,setPage] = useState(1);                //for changing page number while infinite loading\n  const[error,setError] = useState(false);\n  const[loading,setLoading] = useState(false);\n\n//function for fetching data from flickr API\n  async function fetchDataFromUrl(url){\n     var picArray=[];\n     setLoading(true);\n     await fetch(url)\n    .then((res) => {return res.json()})\n    .then((data) => {\n        picArray = data.photos.photo.map((image) => {\n           return `https://farm${image.farm}.staticflickr.com/${image.server}/${image.id}_${image.secret}.jpg`\n        })\n        setImagesArray(prevState => {\n          return([...prevState,...picArray])\n        } );\n        setLoading(false);\n    })\n    .catch(error => {\n      setError(true);\n    })\n  }\n\n//for getting default photos\n  const defaultUrl = `https://www.flickr.com/services/rest/?method=flickr.photos.getRecent&api_key=c603ee6ad346f3682d963bc43161ad94&page=${page}&format=json&nojsoncallback=1`\n  useEffect(() => {\n    if(inputQuery===\"\")\n    fetchDataFromUrl(defaultUrl);\n  },[inputQuery,page])\n\n// for searching photos for given input query\n  useEffect(() => {\n    if(inputQuery!==\"\"){\n    let url = `https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=c603ee6ad346f3682d963bc43161ad94&page=${page}&tags=${inputQuery}&format=json&nojsoncallback=1`\n    fetchDataFromUrl(url);\n    }\n  }, [inputQuery,page])\n\n  //for resetting images array everytime input query changes\n  useEffect(() => {\n    setImagesArray([]);\n  }, [inputQuery])\n\n  return (\n    <React.Fragment>\n      <div>\n        <div>\n          <Header setInputQuery={setInputQuery} \n              inputQuery={inputQuery}\n              setPage={setPage}/>\n        </div>\n        <div className=\"body\">\n          {loading ?  <Loading/> : \"\"}\n          {!error ? <Images \n                      imagesArray={imagesArray} \n                      setOpenModal={setOpenModal} \n                      setModalSrc={setModalSrc} //for getting image source for modal\n                      loading={loading}\n                      page={page}                //page for infinite loading\n                      setPage={setPage}\n                    inputQuery={inputQuery}/> \n                  : <ErrorComponent/>}\n        \n        {openModal ? <ImageModal \n                        link={modalSrc} \n                        setOpenModal={setOpenModal}\n                      /> \n                    : \"\"}\n        </div>\n      </div>\n    </React.Fragment>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}